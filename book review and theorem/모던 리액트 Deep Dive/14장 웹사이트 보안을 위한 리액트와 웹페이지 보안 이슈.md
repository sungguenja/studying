# 14장 웹사이트 보안을 위한 리액트와 웹페이지 보안 이슈

## 14.4 HTTP 보안 헤더 설정하기

9. 보안 헤더 확인하기
   - 보안헤더를 확인할 수 있는 가장 빠른 방법은 보안 헤더의 현황을 알려주는 https://securityheaders.com을 방문하는 것이다
   - 헤더를 확인하고 싶은 웹사이트의 주소를 입력하면 곧바로 현재 보안 헤더 상황을 알 수 있다
   - [next js 헤더](https://nextjs.org/docs/pages/api-reference/next-config-js/headers)

## 14.5 취약점이 있는 패키지의 사용을 피하자

> npm 프로젝트 구동을 위해서는 수많은 패키지에 의존해야 하는데, 이렇게 의존해야 하는 패키지의 목록은 기본적으로 package.json의 dependencies와 devDependencies에 나열돼 있다.
>
> 모든 보안 허점을 우리가 파악하기 어렵다. 따라서 깃허브의 Dependabot이 발견한 취약점은 필요하다면 빠르게 업데이트해 조치해야 한다.

- 핵심적인 패키지는 버저닝과 패치 수정 등 항상 예의 주시하자.
  - Next.js의 경우 이따금씩 보안 이슈가 발견되면 패치 업데이트를 해주므로 주기적으로 이러한 패치 수정을 눈여겨보자.
  - https://security.snyk.io 를 방문해 사용하는 패키지 이름으로 검색해보면 취약점을 파악할 수 있다

## 14.6 OWASP Top 10

> Open Worldwide Application Security Project라는 오픈소스 웹 애플리케이션 보안 프로젝트를 의미
>
> 10대 어플리케이션 취약점을 공개했으니 알아보자

1. A01:2021-Broken Access Control
   - 사용자가 자신의 권한 밖의 행동을 할 수 있는 취약점을 의미한다
   - 예를 들어, 특정 사용자에게만 부여해야 할 권한을 모든 사용자에게 부여하거나 인증되지 않은 사용자가 인증된 사용자만 접근 가능한 곳에 ㅈ점근하는 등의 취약점
   - 허용 목록을 기반으로 공용 리소스를 제외하고는 기본적으로 접근을 막고, 접근 제어 정책을 항상 꼼꼼하게 확인하자
2. A02:2021-Cryptographic Failures
   - 민감 데이터 노출이라는 이름으로 알려져 있었으나 `암호화 실패`라는 이름으로 변경됐다.
   - 암호화에 실패하거나, 오류가 있는 경우, 혹은 암호화해야 하는 데이터가 암호화되지 않은 등 밍감 데이터에 대한 암호화에 실패하는 경우
   - HTTPS로 강제로 리다이렉트 하는 방식을 사용하고, 암호화 시 암호문이 고정되지 않도록 해야 하며, 신뢰할 수 있는 인증서를 사용하는 등의 노력이 필요하다
3. A03:2021-Injection
   - XSS와 같이 사용자가 제공하는 데이터를 조작한 공격을 모두 인젝션으로 분류한다
   - SQL 인젝션, ORM 인젝션도 여기에 포함되어있다
   - 사용자가 입력하는 모든 데이터는 의심하자
4. A04:2021-Insecurity Design
   - 2021년 새롭게 소개된 카테고리고, 코드 구현 단계까 아닌 기획 설계 단계에서 발생한 보안 취약점을 의미.
   - 설계 자체가 보안 문제가 있을 경우 개발로 해결할 수 있는 범위가 제한적일 수 밖에 없으므로 반드시 설계와 기획 단계에서 주의를 기울여야 한다
5. A04:2021-Security Misconfiguration
   - 보안 설정 오류는 애플리케이션 설정 시에 잘못된 설정으로 인해 발생하는 취약점을 의미한다
   - 예를 들어, 불필요한 포트를 열어두거나, MySQL과 같은 데이터베이스 마스터 계정을 아이디나 암호 변경 없이 사용하거나, 보안 헤더를 누락하는 등의 잘못된 설정을 의미한다.
   - 애플리케이션을 처음 설치할 때 불필요한 계쩡이나 샘플, 문서 등을 제거해 두고, 적절한 보안 헤더를 미리 설정해 두는 것이 중요하다
6. A05:2021-Vulnerable and Outdated Components
   - 취약점이 있거나 지원이 종료된 소프트웨어를 사용하는 경우에 발생하는 보안 취약점을 의미한다.
   - npm 패키지 뿐만 아니라, OS, NGINX, 아파치 같이 모든 것들에 대해서
   - 업데이트를 주기적으로 체크하자
7. A07:2021-Identification and Authentication Failures
   - 이전에 취약한 인증으로 소개된 카테고리에 인증 실패까지 포함해 보다 넓은 범위로 확대해 분류됐다.
   - 이 취약점은 사용자의 신원 확인에 실패하거나, 암호 생성 정책이 없는 경우, 무작위 대입으로 암호를 찾을 수 있는 경우. 인증 및 세션 관리가 잘못되어 유출되는 등의 인증 관련 보안 취약점을 말한다
8. A08:2021-Software and Data Integrity Failures
   - 소프트웨어와 데이터 무결성 오류는 애플리케이션이 신뢰할 수 없는 소스, 저장소, CDN, 플러그인, 라이브러리에 의존하거나 잘못된 CI/CD 파이프라인을 사용하는 경우에 발생한다
   - 신뢰할 수 없는 소스의 소프트웨어나 데이터를 사용하는 경우 보안 취약점이 발생할 수 있으므로 반드시 무결성 검증 절차를 거쳐서 보안 취약점이 발생하지 않도록 사전에 예방해야 한다
9. A09:2021-Security Logging and Monitoring Failures
   - 보안 로깅 및 모니터링 오류는 주요 기능에 대한 적절한 로깅이 추가돼 있지 않거나 로깅 정보가 부족해 사전에 공격을 감지하지 못하는 취약점을 의미한다
   - 의심스러운 활동을 사전에 감시할 수 있도록 적절한 형식과 보관 주기로 로깅을 수행해야 하며, 이러한 모니터링은 신속하게 대응할 수 있도록 준비를 갖춰야 한다
10. A10:2021-Server-Side Request Forgery
    - 2021년 새롭게 등장한 카테고리
    - 서버 측 요청 변조
    - 서버에서 이뤄지는 요청을 변조해 원래가야 할 서버가 아닌 공격자가 의도한 서버로 요청이 가게 하거나 또는 위조된 요청을 보내는 취약점을 의미한다
