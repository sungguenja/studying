# 1부 HTTP: 웹의 기초

## 1장 HTTP 개관

### 1.1 HTTP: 인터넷의 멀티미디어 배달부

HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용한다. 때문에 데이터가 지구 반대편에서 오더라도 전송 중 손상되거나 꼬이지 않음을 보장한다.

### 1.2 웹 클라이언트와 서버

웹 콘텐츠는 웹 서버에 존재. 웹 서버(== HTTP 서버)는 HTTP 프로토콜로 의사소통 한다.

클라이언트 => HTTP 요청 => 서버 => HTTP 응답 => 클라이언트

### 1.3 리소스

웹 서버는 웹 리소스를 관리하고 제공한다. 가장 단순한 웹 리소스는 웹 서버 파일 시스템의 정적 파일이다.

그러나 리소스는 반드시 정적 파일일 필요는 없다. 동적 콘텐츠 리소스는 사용자가 누구이며 어떤 정보를 요청했고 언제 요청했는지에 따라 다른 콘텐츠를 생성한다.

- 리소스 종류
  - 미디어 타입
    - `MIME` 타입이라는 데이터 포맷 라벨을 붙인다.
    - 웹 서버는 모든 HTTP 객체 데이터에 `MIME` 타입을 붙인다.
    - `MIME` 타입은 `/`으로 구분된 주타입과 부타입으로 이루어진 문자열 라벨이다.
      - HTML 텍스트 문서의 경우 `text/html`
      - JPEG이미지는 `image/jpeg`
      - GIF는 `image/gif`
  - URI
    - 웹 서버 리소스는 각자 이름을 갖고 클라이언트는 관심있는 리소스를 지목할 수 있다.
    - 서버 리소스 이름은 `통합 자원 식별자`, 혹은 `URI`로 불린다.
    - URI는 URL과 URN이 있다.
  - URL
    - 통합 자원 지시자.
    - URL은 리소스가 정확히 어디에 있고 어떻게 접근할 수 있는지 분명히 알려준다.
    - 세 부분으로 이루어진 표준 포맷을 따른다
      - URL의 첫 번째 부분은 스킴(scheme) 보통 http 프로토콜(`http://`)이다
      - 두 번째 부분은 서버의 인터넷 주소
      - 마지막은 웹 서버의 리소스를 가리킨다
    - 오늘날 대부분의 URI는 URL이다
    - URL 형태를 한번 분석해봐야 한다 예시) `http://www.joes-hardware.com/specials/saw-blade.gif`
      - `http://`: http 프로토콜을 사용해라
      - `www.joes-hardware.com`: www.joes-hardware.com 으로 이동하라
      - `/specials/saw-blade.gif`: /specials/saw-blade.gif 이라고 불리는 리소스를 가져와라
  - URN
    - 유니폼 리소스 이름(uniform resource name)
    - 리소스는 이름이 변하지 않게 유지하는 한, 여러 종류의 네트워크 접속 프로토콜로 접근해도 문제 없다
    - 여전히 실험 중인 상태고 아직 널리 채택되지 않았다.
    - 전망은 밝긴 하다
  - 특별한 언급이 없으면 URN이 큰 파이를 못먹고 있어 URI와 URL을 같은 의미로 사용할 것이다.

### 1.4 트랜잭션

클라이언트가 웹 서버와 리소스를 주고 받을 때는 `HTTP 트랜잭션이 왔다갔다`한다. 이 상호작용은 HTTP 메시지라고 불리는 정형화된 데이터 덩어리를 이용해 이루어진다

- 메서드
  - GET: 서버에서 클라이언트로 지정한 리소스를 보내라
  - PUT: 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스를 저장하라
  - DELETE: 지정한 리소스를 서버에서 삭제하라
  - POST: 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라
  - HEAD: 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라
  - 3장에서 더 제대로 다루자
- 상태코드
  - 요청에 대한 응답의 상태를 나타내는 숫자다
- 웹페이지는 여러 객체로 이루어질 수 있다

### 1.5 메시지

> 3장에서 더 자세히 공부할 예정

HTTP 메시지는 단순한 줄 단위의 문자열이다. 일반 텍스트이기 때문에 사람이 읽고 쓰기 쉽다. 웹 클라이언트에서 웹 서버로 보낸 HTTP 메시지를 요청 메시지, 반대를 응답 메시지라고 불리며 그 외에는 없다. 메시지는 아래 세 부분으로 이루어진다.

- 시작줄
  - 메시지의 첫 줄은 시작줄로, 요청이라면 무엇을 해야 하는지 응답이라면 무슨 일이 일어났는지
- 헤더
  - 시작줄 다음에는 0개 이상의 헤더 필드가 이어진다. 각 헤더 필드는 쉬운 구문 분석을 위해 쌍점(`:`)으로 구분되어 있는 하나의 이름과 하나의 값으로 구성
- 본문
  - 빈 줄 다음에는 어떤 종류의 데이터든 들어갈 수 있는 메시지 본문이 필요에 따라올 수 있다. 요청의 본문은 웹 서버로 데이터를 실어 보내며, 응답의 본문은 클라이언트로 데이터를 반환한다. 문자열이며 관리자에 따라 구조적일수도 아닐수도 있따

### 1.6 TCP 커넥션

- TCP/IP
  - HTTP는 애플리케이션 계층 프로토콜이다.
  - HTTP는 세부적인걸 신경쓰지않는 대신 대중적이고 신뢰성있는 TCP/IP에게 맡기며 아래와 같은 것을 제공한다
    - 오류없는 데이터 전송
    - 순서에 맞는 전달
    - 조각나지 않는 데이터 스트림
- 접속, IP 주소 그리고 포트번호
  - 인터넷 프로토콜(IP) 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 만들어야 한다
  - IP 주소와 포트번호 === URL
  - 리소스 통신 순서
    1. 웹브라우저는 서버의 URL에서 호스트 명을 추출한다
    2. 웹브라우저는 서버의 호스트 명을 IP로 변환한다
    3. 웹브라우저는 URL에서 포트번호(있다면)을 추출한다
    4. 웹브라우저는 웹서버와 TCP 커넥션을 맺는다
    5. 웹브라우저는 서버에 HTTP 요청을 보낸다
    6. 서버는 웹브라우저에 HTTP 응답을 돌려준다
    7. 커넥션이 닫히면, 웹브라우저는 문서를 보여준다
- 텔넷을 이용한 실제 예제
  - HTTP는 TCP/IP를 사용한다
  - 이진 형식이 아닌 문자열 기반
  - 웹서버와 직접 대화하는 것도 간단

### 1.7 프로토콜 버전

1. HTTP/0.9

   - 1991년의 HTTP 프로토타입
   - GET 메서드만 지원
   - 멀티미디어 콘텐츠(MIME), HTTP 헤더, 버전 번호 `지원 X`
   - HTML 객체를 받아오기 위해 만들어진 것

2. HTTP/1.0

   - 버전 번호, HTTP 헤더, 추가 메섣, 멀티미디어 객체 처리 추가
   - 시각적으로 매력적인 웹페이지와 상호작용하는 폼을 실현
   - 월드 와이드 웹을 대세로 만들었다
   - `잘 정의된 것은 아님`
   - 상업적, 학술적으로 급성장하던 시기에 만들어짐
   - 잘 동작하는 용례들의 모음

3. HTTP/1.0+

   - 1990년대 중반, 급격히 성장하던 때에 요구에 맞추기 위해 HTTP에 기능을 추가된 상황
   - 오래 지속되는 `keep-alive` 커넥션, 가상 호스팅 지원, 프락시 연결 지원을 포함해 다양한 표준 추가

4. HTTP/1.1

   - HTTP 설계의 구조적 결함 교정, 두드러진 성능 최적화, 잘못된 기능 제거에 집중
   - 더 복잡해진 웹 애플리케이션과 배포를 지원
   - 현재의 버전

5. HTTP/2.0

   - 1.1 성능 문제를 개선하기 위해 구글의 SPDY 프로토콜을 기반으로 설계가 진행 중
   - 10장에서 더 자세한 이야기를 하자

### 1.8 웹의 구성요소

- 프락시: 클라이언트와 서버 사이에 위치한 HTTP 중개자
- 캐시: 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- 게이트웨이: 다른 애플리케이션과 연결된 특별한 웹 서버
- 터널: 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시
- 에이전트: 자동화된 HTTP 요청을 만드는 준지능적 웹 클라이언트
