# 1부 HTTP: 웹의 기초

## 3장 HTTP 메시지

> 배울 것을 정리해보자
>
> - 메시지가 어떻게 흘러가는가
> - HTTP 메시지의 셉 부분(시작줄, 헤더, 개체 본문)
> - 요청과 응답 메시지의 차이
> - 요청 메시지가 지원하는 여러 기능들
> - 응답 메시지가 반환하는 여러 상태 코드들
> - 여러 HTTP 헤더들은 무슨 일을 하는가

### 3.1 메시지의 흐름

`인바운드`, `아웃바운드`, `업스트림`, `다운스트림`은 메시지 방향을 의미하는 용어다

![](images_qmasem_post_bb942d1f-0054-4450-a240-8f2438fbe67d_image.png)

1. 메시지는 원 서버 방향을 인바운드로 하여 송신된다
   - HTTP는 인바운드와 아웃바운드라는 용어를 트랜잭션 방향을 표현하기 위해 사용한다
   - 메시지가 원 서버로 향하는 것은 인바운드로 이동하는 것
   - 모든 처리가 끝난 뒤에 미시지가 사용자 에이전트로 돌아오는 것은 아웃바운드로 이동하는 것이다.
2. 다운스트림으로 하르는 메시지
   - HTTP메시지는 강물과 같이 흐른다
   - 모든 메시지는 다운스트림으로 흐른다
   - 메시지의 발송자는 수신자의 업스트림이다

### 3.2 메시지의 각 부분

> HTTP 메시지는 단순한, 데이터의 구조화된 블록이다
>
> 메시지는 `시작줄`, `헤더 블록`, `본문` 이렇게 세 부분으로 이루어진다.

- 시작줄
  - 어떤 메시지인지 서술
  - 그냥 줄 단위로 분리된 아스키 문자열이다
- 헤더 블록
  - 속성을 서술
  - 그냥 줄 단위로 분리된 아스키 문자열이다
- 본문
  - 데이터를 담고 있다
  - 아예 없을 수도 있다
  - 텍스트나 이진 데이터를 포함할 수도 있고 그냥 비어있을 수도 있다.

1. 메시지 문법

   - 모든 HTTP 메시지는 요청 메시지나 응답 메시지로 분류도니다
   - 요청 메시지는 웹 서버에 어떤 동작을 요구한다
   - 응답 메시지는 요청의 결과를 클라이언트에게 돌려준다
   - 요청 메시지의 형식

     ```
       <메서드> <요청 URL> <버전>
       <헤더>

       <엔티티 본문>
     ```

   - 응답 메시지의 형식

     ```
       <버전> <상태 코드> <시우 그잘>
       <헤더>

       <엔티티 본문>
     ```

   - 메서드
     - 클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작
     - `GET`, `HEAD`, `POST`와 같이 한단어로 되어 있다
   - 요청 URL
     - 요청 대상이 되는 리소스를 지칭하는 완전한 URL 혹은 URL의 경로 구성요소다.
     - 완전한 URL이 아닌 URL의 경로 구성요소라고 해도, 클라이언트가 서버와 직접 대화하고 있고 경로 구성요소가 리소스를 가리키는 절대 경로이기만 하면 대체로 문제가 없다
   - 버전
     - 이 메시지에서 사용 중인 HTTP의 버전이다.
     - 형식은 `HTTP/<메이저>.<마이너>`의 형태이다
     - 메이저, 마이너 모두 정수아디
   - 상태코드
     - 요청 중에 무엇이 일어났는지 설명하는 세 자리의 숫자
   - 사유 구절
     - 숫자로 된 상태 코드의 의미를 사람이 이해할 수 있게 설명해주는 짧은 문구로, 상태 코드 이후부터 줄바꿈 문자열까지가 사유 구절이다
   - 헤더들
     - 이름, 콜론, 선택적인 공백, 값, CRLF가 순서대로 나타나는 0개 이상의 헤더들
     - 이 헤더의 목록은 빈 줄로 끝나 헤더 목록의 끝과 엔터티 본문의 시작을 표시한다
   - 엔티티 본문
     - 임의의 데이터 블록을 포함
     - 모든 메시지가 엔티티 본문을 갖는 것은 안다

2. 시작줄
   - 모든 HTTP 메시지는 시작줄로 시작한다.
   - 요청 메시지의 시작줄은 무엇을 해야 하는지 말해준다.
   - 응답 메시지의 시작줄은 무슨 일이 일어났는지 말해준다.
   - 요청줄
     - 요청 메시지는 서버에게 리소스에 대해 무언가를 해달라고 부탁한다.
     - 어떤 동작이 일어나야 하는지 설명해주는 `메서드` + 동작에 대한 대상일 지칭하는 `요청 URL` + `HTTP 버전`
     - 모든 필드는 공백으로 구분
   - 응답줄
     - 응답 메시지는 수행 결과에 대한 `상태 정보` + `결과 데이터` => 클라이언트에게 전달
     - `HTTP의 버전` + 숫자로 된 `상태 코드` + 수행 상태에 대해 설명해주는 텍스트로 된 `사유 구절`
     - 모든 필드는 공백으로 구분
   - 메서드
     - GET: 서버에서 어떤 문서를 가져온다
     - HEAD: 서버에서 어떤 문서에 대해 헤더만 가져온다
     - POST: 서버가 처리해야 할 데이터를 보낸다
     - PUT: 서버에 요청 메시지의 본문을 저장한다
     - TRACE: 메시지가 프락시를 거쳐 서버에 도달하는 과정을 추적한다
     - OPTIONS: 서버가 어떤 메서드를 수행할 수 있는지 확인한다
     - DELETE: 서버에서 문서를 제거한다
     - 추가적인 커스텀한 메서드도 가능하다
   - 상태 코드
     - 100~199: 정보
     - 200~299: 성공
     - 300~399: 리다이렉션
     - 400~499: 클라이언트 에러
     - 500~599: 서버 에러
   - 사유 구절
     - 응답 시작줄의 마지막 구성요소
     - 상태 코드에 대한 글로 된 설명
   - 버전 번호
     - HTTP의 버전을 말해줌
