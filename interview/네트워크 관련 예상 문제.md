# 네트워크 관련 예상 문제

> 1. IPv4 & IPv6
> 2. TCP/IP protocol suite
> 3. 패킷이 여러 네트워크와 라우터를 거쳐서 전달되는 과정을 설명
> 4. circuit switching, packet switching
> 5. acknowledgement 방식
> 6. silly window syndrome
> 7. packet loss
> 8. syn flooding
> 9. tcp에서 congestion
> 10. tcp header
> 11. 서브넷
> 12. arp
> 13. icmp
> 14. arp, rarp, dhcp
> 15. spoofing
> 16. 패킷 스니핑
> 17. nat

1. IPv4 & IPv6
   - v4: 총 32비트가 쓰인다. 약 40억정도
   - v6: 총128비트가 쓰인다. 2^128
2. TCP/IP protocol suite
   1. 물리계층: 기계적 신호로 변환하고 전달
   2. 데이터 링크: router to router전달.
   3. 네트워크: 헤더안으로 들어가 라우팅 경로 결정
   4. 전송: port번호를 보고 전달
   5. 응용: 자원을 받아들이고 전달, 관리
3. 패킷이 여러 네트워크와 라우터를 거쳐서 전달되는 과정
   - 먼저 보내는 곳에서 데이터에 up, 그리고 시작 맥 주소, 다음 맥 주소가 헤더에 담겨져 보냄
   - 맥 주소를 비교하면서 도착 ip와 계속 비교하여 목적지 확인
4. circuit switching, packet switching
   1. circuit switching: 중앙 통제하에 일어남. 경로를 미리 set up해둔다. 그 경로를 사용하면 손실은 적으나 비효율적이고 그 경로가 손상되면 사용불가. 패킷이 분리되지 않고 한번에 전달
   2. packet switching: 라우터들끼리 분산된 정보를 주고 받는다. 손실이 있을 수 있지만 유연함. 의존성도 떨어짐. 패킷을 분리해서 보내고 transport계층에서 재조립함.
5. Acknowledgement 방식
   1. selective 방식: 손실된 Segment때문에 ACK를 다시 보낼 때 이미 받은 segment정보를 같이 보내줌
   2. cumulative 방식: 손실된 Segment를 받기 전 여기까지 받았다 라는 것을 number로 알려줌 (TCP가 비슷함)
6. silly window syndrome
   - 문제
     - 수신측에서 데이터를 처리하는 속도가 늦어져 윈도우크기가 계속해서 감소되어 송신측으로 보내짐
     - 그러면 그 윈도우크기를 보고 송신 측에서는 더 작고 더 자주 패킷을 쪼개서 보냄
     - 이렇게 작은 패킷을 계속해서 보내면 매우 비효율적
   - 해결법
     - 송신측에서 `Nagle Algorithm`이라고 한다. ack를 받을 때까지 출력버퍼의 데이터를 저장하였다가 ACK를 받으면 버퍼의 데이터를 모두 저장했다가 한번에 보냄
     - 수신 측에서는 `clark`해결법이라고 하는데 윈도우의 크기가 mms나 버퍼의 크기가 반이 될 때까지 받을 수 없다고 ack을 계속해서 보내게 된다.
7. packet loss
   1. 먼저 일반적으로 데이터를 전송한 것에 대한 응답으로 ack가 오게 된다. 이때 받은 ack에서 다음 데이터를 원하게 된다고 하면
      - 보내줄 데이터가 아직 버퍼에 차지 않았을 경우 일정한 시간동안 기다렸다가 데이터가 오게 되면 보내준다
      - 이 때 중간에 또 다른 것도 보내달라는 요청이 오게 될 경우 이에 대한 응답으로 ack를 보내준다
   2. 근데 만약 이에 대한 응답으로 패킷을 전송했는데 먼저 보낸 패킷이 중간에서 전달이 안되고 다음 전송된 데이터가 먼저 도착할 경우 순서가 바뀌게 된 것이다! => 이전 것이 안왔다고 packet loss를 알려주는 ack를 보냄. 그리고 기다리다 time out되면 다시 재전송
   3. 그 ack를 수신한 측은 다시 데이터를 보내주고 이에 대한 ack를 송신한 쪽에 바로 보내준다
8. SYN Flooding
   - 악성적으로 계쏙해서 연결을 만들어 SYN을 보내고 스푸핑으로 ip를 변경시켜 syn+ack를 받지 않는다
   - 이렇게 되면 서버측에서는 syn+ack보낸 것에 대해 ack기다리면서 대기를 해서 연결요청이 대기큐에 계속 쌓인다
   - 대기큐가 쌓이면서 정상적인 사용자들의 일을 제대로 할 수가 없다
9. Congestion관리
   - 처음에는 윈도우 크기 만큼 전송했었다
   - 요즘에는 slow starter기법 사용
10. tcp header
    - checksum: 전송중에 비트가 바뀌는 경우 error detection용으로 가지고 다님. 반드시 체크를 하고 받아야 한다. 16비트씩 잘라서 더하고 보수를 취해서 나중에 checksum과 데이터를 더했을 때 0이 되면 오류가 없는 것으로 판단
11. 서브넷
    - 하나의 스위치에 한 네트워크 주소로 연결이 되어있다면 이 스위치에는 6만 5천개 정도가 한 스위치에 몰려있는 것을 의미. 이렇게 될 경우 매우 bandwidth활용이 낮아지고 관리 또한 힘들어진다. 또 스위치 하나가 고장나면 터짐
    - 서브넷으로 관리하여 netid비트를 제외하고 hostid 비트에서 몇자리를 추출하여 앞자리를 netid에 더하여 subnetid로 만들어 관리하게 되면 네트워크 주소가 나눠지게 된다. 만약 뒤 2비트를 추가하여 subnetid를 만들 경우 4개의 서브넷이 만들어진다.
    - 서브넷의 서브넷을 만들어 관리 할 수 있고 classless인 주소 체계에서도 서브넷을 만들어 관리 할 수 있다.
12. ARP
    - ip주소를 통해 mac주소를 알아낼 수 있음. 네트워크 계층에서 작동
    - 브로드캐스트로 리퀘스트를 보내고 reply는 unicast로 온다
    - 먼저 캐싱테이블에 있는 mac주소를 찾아보고 없으면 request를 보낸다
13. icmp
    - 인터넷은 중앙 통제이기 때문에 모니터링이 힘듦
    - 에러가 발생할 경우 리포팅이 필요한데 원래 소스로 에러 코드를 담아 보내주는 역할을 icmp가 한다. ip와 같은 네트워크 계층에서 작업
14. arp,barp, dhcp
    - arp
      - 목적지 시스템에 해당하는 맥주소를 알아오는 역할
    - barp
      - 현 시스템의 아이피 주소를 받아오고자 할때 사용되는 프로토콜
    - dhcp
      - BARP => BootP => DHCP
      - 호스트 ip 구성관리를 단순화 하는 ip표준
      - ip주소를 중앙에서 관리하고 할당할 수 있게 해준다.
15. spoofing
    - ip 스푸핑: ip정보를 속여서 공격하는 것
    - dns 스푸핑, arp: 응답을 요청하는 서버와 컴퓨터 사이의 통신을 자신쪽으로 우회시켜 데이터를 탈취
16. 패킷 스니핑
    - 패킷 스니핑은 패킷 교환을 훔쳐보는 행위
17. NAT
    - 네트워크 주소 변환
    - ip 패킷의 tcp/udp 포트 숫자와 소스 및 목적지의 ip 주소 등을 재기록하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술을 말한다. 패킷에 변화가 생기기 때문에 ip나 tcp/udp의 체크섬도 다시 계산되어 재기록해야 한다.

