# 기타 추가 지식

- 패스워드 암호화 방법
  1. 단순 텍스트
  2. 단방향 해시 함수의 다이제스트
     - 수학적인 연산을 통해 원본 메시지를 변환하여 암호화된 메시지인 다이제스트를 생성
     - 원본 => 암호화 는 가능하지만 암호화된걸 복호화할 수는 없어 단방향이라고 한다
     - avalanche효과
       - 대부분의 해시 함수는 입력 값의 일부가 변경되었을 때 다이제스트가 완전히 달라지도록 설계
     - 문제점
       - 인식 가능성
         - 레인보우 공격
         - 공격자가 전처리된 다이제스트를 가능한 한 많이 확보한 다음 이를 탈취한 다이제스트와 비교해 원본 메시지를 찾아내거나 동일한 효과의 메시지를 찾을 수 있따.
       - 속도
         - 해시 함수는 짧은 시간에 데이터를 검색하기 위해 설계된 것
         - 해시 함수의 빠른 처리 속도로 인해 공격자는 매우 빠른 속도로 임의의 문자열의 다이제스트와 해킹할 대상의 다이제스트를 비교할 수 있따
  3. 솔팅
     - 솔트: 단방향 해시 함수에서 다이제스트를 생성할 때 추가되는 바이트 단위의 임의의 문자열
     - 원본메시지에 문자열을 추가하여 다이제스트를 생성하는 것
       - 솔트 + 원본메시지 = 다이제스트
     - 사용자별로 다른 솔트를 사용한다면 동일한 패스워드를 사용하는 사용자의 다이제스트가 다르게 생성되어 인식 가능성 문제가 크게 개선된다
  4. 키 스트레칭
     - 여러 단계의 해시 함수를 적용하여 다이제스트를 생성하는 과정
- sql injection
  - sql 삽입 공격으로 애플리케이션의 허점을 이용해서 데이터베이스를 비정상적으로 조작하는 기법
  - 방버방법: `mysql_real_escape_string`을 사용하는 것만으로도 많은 공격을 차단할 수 있따
- CSRF 공격
  - cross-site request forgery. 사이트 간 요청 위조
  - 일단 사용자가 웹사이트에 로그인한 상태에서 사이트 간 요청 위조 공격 코드가 삽입된 페이지를 열면, 공격 대상이 되는 웹사이트는 위조된 공격 명령이 믿을 수 있는 사용자로부터 발송된 것으로 판단하게 되어 공격에 노출된다.
  - 방어 방법
    - XSS와 마찬가지로, 입력 필터링은 기본
    - 모든 민감한 동작에 필수로 요구되는 확인 절차가 항상 수행되도록 한다
    - 민감한 동작에 사용되는 쿠키는 수명이 짧게
- XSS 공격
  - 사이트간 스크립팅 공격
  - 사용자가 입력한 정보를 출력할 때 스크립트가 실행되도록 하는 공격기법
  - 방어 방법
    - htmlspecialchars사용
      - 이 함수는 html코드를 해석하지 않고 화면에 그대로 출력하도록 변환
    - 쿠키는 xss 공격과 csrf 공격 등에 취약하기 때문에
      - 쿠기 속성 `HttpOnly` 옵션을 활성화
      - 세션 옵션 Secire을 활성화
      - 쿠키를 사용하는 요청은 서버 단에서 검증하는 로직을 꼭 마련해두는 것이 좋다
      - HTTPS를 이용해서 통신 하는 것이 좋다
- OAuth
  - 사용자가 어떤 애플리케이션을 이용할 때, 비밀번호를 입력하지 않고 OAuth를 제공하는 애플리케이션의 계정 정보를 공유하여 접근 구너한을 부여할 수 있는 수단
  - 과정
    1. 소비자가 서비스 제공자에게 '요청 토큰'을 요청
    2. 서비스 제공자가 소비자에게 '요청 토큰' 발급
    3. 소비자가 사용자를 서비스 제공자에게 이동시키고, 이 과정에서 사용자 인증 수행
    4. 사용자 인증 후, 서비스 제공자가 사용자를 소비자로 이동
    5. 소비자가 '접근 토큰' 요청
    6. 서비스 제공자가 '접근 토큰' 발급
    7. 소비자는 '접근 토큰'을 사용하여 사용자 정보에 접근 가능

