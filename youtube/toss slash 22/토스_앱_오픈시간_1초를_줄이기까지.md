# 토스 앱 오픈시간 1초를 줄이기까지

[영상 링크](https://www.youtube.com/watch?v=IVt7HjUM0LQ)

> 1. 어떻게 접근했는지
> 2. 어떤 시도를 할 수 있었는지
> 3. 그 밖의 소소한 개선들

## 1. 어떻게 접근했는지

- 원인 파악하기
  - 실제 유저 데이터 로깅 및 분석
    - 사용자들이 어디서 병목을 겪고 있는지 알 수 있다면?
    - 홈 화면이 보여질 때까지의 코드들을 구간을 나눠 기록
  - 메소드 프로파일링
    - 디바이스에서 어떤 행위시 시간을 많이 먹는지 파악이 가능하다
    - 하지만 실제환경과는 조금 다르다는 것이 문제다

## 2. 어떤 시도를 할 수 있었는지

1. 첫 화면을 띄우는데 필요한 API 호출 없애기
2. Main Thread의 부담 줄이기
3. 앱 초기화 과정을 병렬로 나누고 실행하기
4. SplashActivity 제거하기

### 첫 화면을 띄우는데 필요한 API 없애기

서버와의 비동기 요청 이후에 화면을 보여줌 => 이후 화면 로딩이 끝나고 화면을 먼저 보여준 후 api 요청을 보내게 수정

### 메인 쓰레드의 부담 줄이기

- 프로파일링을 통해 얻은 결과물 분석
- 메인 스레드에서 돌 필요가 없는 코드는 다른 스레드로
- 불필요한 로직은 제거

### 앱 초기화 과정을 병렬로 나누고 실행하기

- A 모듈 초기화가 끝나야 B모듈 초기화 실행 가능
- **비동기 처리가 곤란함**
- 의존 관계가 있는 모듈끼리 나누어 초기화

### SplashActivity 제거하기

- os와 앱이 제공하는 두 스플래시 화면이 존재
- 앱이 제공하는 스플래시 화면을 삭제
